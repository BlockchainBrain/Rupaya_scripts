WALLETS=6

COMMANDS="rinfo rps start resync"

run_as_rupxmn(){
	if [ "$1" == "all" ]; then
		echo "rupxmn " && sudo runuser -l "rupxmn" -c "$2"
		for i in $(seq 2 $WALLETS); do
			echo "rupxmn$i " && sudo runuser -l "rupxmn$i" -c "$2"
		done
	else
		echo "rupxmn$1 " && sudo runuser -l "rupxmn$1" -c "$2"
	fi
}

rpcli(){
	run_as_rupxmn $1 "rupaya-cli $2"
}

rinfo(){
	echo Checking the Rupaya wallet version, block count, and connections
	rpcli $1 getinfo
}

start(){
	run_as_rupxmn $1 "rupayad -daemon"
}

stop() {
	rpcli $1 stop
}

resync(){
	run_as_rupxmn $1 "rupayad -daemon -resync"
}

rps(){
	echo Checking to see if the Rupaya Daemon is running
	ps -ef | grep rupaya
}

bc(){
	echo Checking the Block Count
	rpcli $1 getblockcount
}

for c in $COMMANDS; do
        if [ "$1" == "$c" ]; then
                $@
                break
        fi
done
